title: 巧妙实现固定定位
date: 2017-09-15
category: 技术
tags: [CSS]
---

提到实现固定定位，多数人第一反应想到的就是使用 `position: fixed;`，的确，这是最为直接的，也是最为简单的方式；然而，在移动端，`position: fixed;` 目前的表现并不是那么理想（例如 `input` 元素获取焦点会影响 `fixed` 定位），或者需要使一个固定定位的元素支持水平方向上的滚动，`fixed` 也是不能满足的，因此，笔者将在下文中，结合移动端的例子再介绍两种其他的方式来实现固定定位。
<!-- more -->

## 利用 `position: fixed;`
虽然 `fixed` 或多或少还有些问题，但如果对兼容性要求不是很高的场景下，这种方式还是很好使的。下面结合例子来简要介绍下：
### html:
```html
<div class="container">
	<header class="bar bar-header">
		<h1 class="title">header</h1>
	</header>
	<div class="content">
		<h2>content</h2>
		...
		<p>content-last</p>
	</div>
	<footer class="bar bar-footer">
		fixed：<input type="text" placeholder="搜索" />
	</footer>
</div>
```
### css:
```css
.bar {
   width: 100%;
   height: 40px;
   line-height: 40px;
   text-align: center;
   position: fixed;
   background: #f00;
}
.bar-header {
   top: 0;
}
.bar-footer {
   bottom: 0;
}
.title {
   margin: 0;
}
.content {
   margin: 40px 0;
}
```
![固定定位——fixed](http://wx4.sinaimg.cn/mw690/c4b5f11bly1ff7bo67c6aj20ho0fa777.jpg)
<div align="center">*图1.固定定位——fixed*</div>

## 利用 `postion: absolute;`
我们知道 `fixed` 和 `absolute` 的定位表现很相似，主要区别在于 `fixed` 的偏移定位是以窗口为参考，当出现滚动条时，对象不会随着滚动；而 `absolute` 偏移参照的是离自身最近的定位祖先元素。那么要实现类似 `fixed` 这种定位效果，可以转换一种角度：头部、主体和底部展示一页的高度，如果有超出的部分，让其能够滚动上来。
### css:
```css
// html 详见第一个例子
.bar {
   width: 100%;
   height: 40px;
   line-height: 40px;
   text-align: center;
   position: absolute;
   background: #f00;
}
.bar-header {
   top: 0;
}
.bar-footer {
   bottom: 0;
}
.title {
   margin: 0;
}
.content {
   position: absolute;
   top: 40px;
   left: 0;
   right: 0;
   bottom: 40px;
   overflow-y: auto;
}
```
![固定定位——absolute](http://wx2.sinaimg.cn/mw690/c4b5f11bly1ff7bo5pyksj20hs0f7acv.jpg)
<div align="center">*图2.固定定位——absolute*</div>

### 利用 `display: flex;`
`flex`，即 “Flexible Box”，用 `flex` 实现固定定位的原理和用 `position: absolute;` 基本类似，区别在于，撑起盒子高度的方式不一样——利用了项目的 `flex-grow
` 属性，项目该属性默认是 “0”，表示即使存在剩余空间，项目也不会放大而铺满剩余空间。如果单个项目的 `flex-grow` 属性设置为 “1”，那该项目将占据剩余的所有空间，其他项目保持其该有的高（宽）度。
前文中提到的实现水平方向的滚动，使用 `flex` 是可以轻松实现的。
```css
// html 详见第一个例子
html,body {
   height: 100%;
   margin: 0;
   padding: 0;
}
.container {
   width: 100%;
   height: 100%;
   display: flex;
   flex-direction: column;
}
.bar {
   width: 100%;
   height: 40px;
   line-height: 40px;
   text-align: center;
   background: #f00;
}
.title {
   margin: 0;
}
.content {
   flex: 1;
   overflow: auto;
}
```
![固定定位——flex](http://wx4.sinaimg.cn/mw690/c4b5f11bly1ff7bo6j70cj20hu0f6mzy.jpg)
<div align="center">*图3.固定定位——flex*</div>

## 写在最后
`fixed` 属性结合 input 输入框在移动端的确还有些坑，如果有类似的场景，可以试试用 `absolute` 或 `flex` 来实现固定定位。
ps：代码仅供参考，如需使用，请自行补充兼容代码；行文如有错误，敬请斧正。
